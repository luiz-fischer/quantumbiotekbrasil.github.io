<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../css/style.css" />
    <link
      rel="shortcut icon"
      href="../../assets/AvRecurso-2.png"
      type="image/x-icon"
    />
    <title>Nossos Produtos - Quantum Biotek Brasil</title>
  </head>
  <body>
    <div class="main-content">
      <section class="contact">
        <img
          src="../../assets/arboles-fondo.jpg"
          alt="Background Image"
          class="contact-bg"
        />
        <div class="contact-content">
          <h1>Nossos</h1>
          <h1>Produtos</h1>
        </div>
      </section>
    </div>

    <!-- Include the menu -->
    <div id="menu-container"></div>
    <div class="cards-wrapper">
      <div class="portifolio"></div>
      <h1 id="related-products-title">Produtos Relacionados</h1>
      <div id="related-products">
        <section class="devices-section">
          <h1>Nossos Dispositivos</h1>
          <div class="devices-container">
            <div class="card">
              <a href="portifolio/quantumbiotek8.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek8-300x300.jpg"
                  alt="OmniEnviro H.D.M.R. Ref:SS316Lx1"
                />
                <p>OmniEnviro H.D.M.R. Ref:SS316Lx1</p>
              </a>
            </div>
            <div class="card">
              <a href="portifolio/quantumbiotek6.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek6-300x300.jpg"
                  alt="OmniEnviro H.D.M.R. Ref:SS316Lx3"
                />
                <p>OmniEnviro H.D.M.R. Ref:SS316Lx3</p>
              </a>
            </div>
            <div class="card">
              <a href="portifolio/quantumbiotek5.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek5-300x300.jpg"
                  alt="OmniEnviro H.D.M.R. Ref:SS316Lx8"
                />
                <p>OmniEnviro H.D.M.R. Ref:SS316Lx8</p>
              </a>
            </div>
            <div class="card">
              <a href="portifolio/quantumbiotek.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek-300x300.jpg"
                  alt="Personal Home Funnel"
                />
                <p>Funil doméstico de uso pessoal</p>
              </a>
            </div>
            <div class="card">
              <a href="portifolio/quantumbiotek7.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek7-300x300.jpg"
                  alt="OmniEnviro H.D.M.R. Ref:SS316Lx1"
                />
                <p>OmniEnviro H.D.M.R. Ref:SS316Lx2″</p>
              </a>
            </div>
            <div class="card">
              <a href="portifolio/quantumbiotek5.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek5-300x300.jpg"
                  alt="OmniEnviro H.D.M.R. Ref:SS316Lx3"
                />
                <p>OmniEnviro H.D.M.R. Ref:SS316Lx4</p>
              </a>
            </div>
            <div class="card">
              <a href="portifolio/quantumbiotek4.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek4-300x300.jpg"
                  alt="OmniEnviro H.D.M.R. Ref:SS316Lx8"
                />
                <p>OmniEnviro H.D.M.R. Ref:SS316Lx12</p>
              </a>
            </div>
            <div class="card">
              <a href="portifolio/quantumbiotek2.html" class="card-link">
                <img
                  src="../../assets/quantumbiotek2-300x300.jpg"
                  alt="Personal Home Funnel"
                />
                <p>Funil portátil</p>
              </a>
            </div>
          </div>
        </section>
      </div>
    </div>
    <!-- Include the footer -->
    <div id="footer-container"></div>

    <script src="../../js/script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Carrega o conteúdo principal com base no último ID clicado
        const lastClickedId = sessionStorage.getItem("lastClickedId");
        const filePath = `./portifolio/${lastClickedId}.html`;

        fetch(filePath)
          .then((response) => response.text())
          .then((html) => {
            document.querySelector(".portifolio").innerHTML = html;
            
            // IMPORTANTE: Ajustar caminhos de imagens e links
            // O HTML carregado tem ../../../ (3 níveis) mas estamos em produtos.html (2 níveis)
            // Precisamos mudar ../../../ para ../../
            const portifolioDiv = document.querySelector(".portifolio");
            
            // Ajustar todas as imagens
            portifolioDiv.querySelectorAll('img[src^="../../../"]').forEach(img => {
              img.src = img.src.replace('../../../', '../../');
            });
            
            // Ajustar todos os links (PDFs, etc)
            portifolioDiv.querySelectorAll('a[href^="../../../"]').forEach(link => {
              link.href = link.href.replace('../../../', '../../');
            });
          })
          .catch((error) =>
            console.error("Failed to load the HTML file:", error)
          );
      });

      document.addEventListener("DOMContentLoaded", function () {
        // Carrega produtos relacionados aleatoriamente
        const cardsContainer = document.querySelector(".devices-container");
        const allCards = cardsContainer.querySelectorAll(".card");
        const cardsArray = Array.from(allCards);
        const shuffledCards = cardsArray.sort(() => 0.5 - Math.random());
        const selectedCards = shuffledCards.slice(0, 3);
        const relatedProductsContainer =
          document.getElementById("related-products");

        relatedProductsContainer.innerHTML = ""; 

        selectedCards.forEach((card) => {
          const cardClone = card.cloneNode(true);
          relatedProductsContainer.appendChild(cardClone); 

          cardClone
            .querySelector(".card-link")
            .addEventListener("click", function (event) {
              event.preventDefault();
              const href = this.getAttribute("href").split("/").pop(); 
              sessionStorage.setItem("lastClickedId", href.split(".")[0]); 
              window.location.href = "./produtos.html";
            });
        });
      });
    </script>
  </body>
</html>
